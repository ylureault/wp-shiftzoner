# Guide d'Installation ShiftZoneR

## üöÄ Activation des Pages avec Templates

### Pages Existantes √† Configurer

Vous avez d√©j√† cr√©√© ces pages dans WordPress. Il faut maintenant leur assigner les bons templates.

#### 1. Page Soumettre Photo (ID: 53)

1. Allez dans **Pages > Toutes les pages**
2. Cliquez sur **Modifier** pour la page ID 53
3. Dans le panneau de droite, section **Attributs de page**
4. Dans le menu d√©roulant **Mod√®le**, s√©lectionnez : **soumettre une photo (marque -> mod√®le + logo + exif)**
5. Cliquez sur **Mettre √† jour**

**Slug recommand√©** : `/soumettre-photo/`

#### 2. Page Marques (ID: 177)

1. Allez dans **Pages > Toutes les pages**
2. Cliquez sur **Modifier** pour la page ID 177
3. Dans le panneau de droite, section **Attributs de page**
4. Dans le menu d√©roulant **Mod√®le**, s√©lectionnez : **Page Marques**
5. Cliquez sur **Mettre √† jour**

**Slug recommand√©** : `/marques/`

#### 3. Page Discussion (ID: 11)

Cette page utilise bbPress. Assurez-vous que :
1. bbPress est activ√©
2. La page est d√©finie comme "Page Forums" dans **R√©glages > Forums > Pages**

**Slug recommand√©** : `/discussion/` ou `/forums/`

---

## üìã Cr√©ation des Pages Suppl√©mentaires

### Page Galerie

1. **Pages > Ajouter**
2. Titre : **Galerie** ou **Explorer**
3. Slug : `galerie`
4. Template : **Archive Car Photo Template - Galerie**
5. Publier

### Page Carte Interactive

1. **Pages > Ajouter**
2. Titre : **Carte** ou **Carte Interactive**
3. Slug : `carte`
4. Template : **Carte Interactive**
5. Publier

---

## üîß Configuration BuddyPress

### 1. Activer les Composants

Allez dans **R√©glages > BuddyPress > Composants** et activez :
- ‚úÖ Profils Membres √âtendus
- ‚úÖ Groupes Sociaux
- ‚úÖ Flux d'Activit√©s
- ‚úÖ Notifications
- ‚úÖ Param√®tres du Compte
- ‚úÖ Messages Priv√©s (optionnel)

### 2. Cr√©er les Pages BuddyPress

BuddyPress devrait cr√©er automatiquement :
- Page Membres
- Page Activit√©
- Page Groupes

V√©rifiez dans **R√©glages > BuddyPress > Pages**

### 3. Cr√©er les Groupes pour les Marques Existantes

Ouvrez **Outils > PHP** (via plugin Code Snippets ou Theme Functions) et ex√©cutez :

```php
shiftzoner_init_brand_groups();
```

Cela cr√©era automatiquement un groupe BuddyPress pour chaque marque de voiture dans votre taxonomie.

---

## üé® Configuration Easy Watermark

Easy Watermark est d√©j√† install√©. Pour √©viter les conflits avec notre watermark int√©gr√© :

### Option 1 : Utiliser Easy Watermark (recommand√©)

1. Allez dans **R√©glages > Easy Watermark**
2. Configurez votre filigrane (texte "¬© ShiftZoneR" ou logo)
3. Cochez **Appliquer automatiquement**
4. S√©lectionnez les types de fichiers : **car_photo**

**Dans functions.php, commentez notre watermark** :

```php
// 13. WATERMARKING
// D√©sactiv√© car Easy Watermark est utilis√©
// add_filter( 'wp_generate_attachment_metadata', 'shiftzoner_apply_watermark', 10, 2 );
```

### Option 2 : Utiliser notre watermark int√©gr√©

D√©sactivez Easy Watermark et notre code int√©gr√© fonctionnera automatiquement.

---

## üõ°Ô∏è Configuration CAPTCHA 4WP

CAPTCHA 4WP est install√©. Pour l'activer sur le formulaire d'upload :

1. Allez dans **CAPTCHA 4WP > Settings**
2. S√©lectionnez **Google reCAPTCHA v3** (invisible) ou **v2**
3. Entrez vos cl√©s Google reCAPTCHA
4. Dans **Forms**, cochez : **Comments**, **Login**, **Registration**

**Pour l'ajouter au formulaire de soumission photo**, ajoutez dans `page-soumettre-photo.php` ligne 341 (avant le bouton submit) :

```php
<?php
if ( function_exists( 'c4wp_nocaptcha_form_field' ) ) {
    c4wp_nocaptcha_form_field();
}
?>
```

---

## üè∑Ô∏è Cr√©ation des Taxonomies

### 1. Cr√©er les Marques

Allez dans **Photos Auto > Marques** et cr√©ez :
- Ferrari
- Porsche
- Lamborghini
- Mercedes
- BMW
- Audi
- etc.

**Pour chaque marque, uploadez un logo** :
1. Cliquez sur **Modifier** la marque
2. Dans la section personnalis√©e ACF ou meta, uploadez le logo
3. Sauvegardez

### 2. Cr√©er les Mod√®les

Allez dans **Photos Auto > Mod√®les**

**IMPORTANT** : Les mod√®les doivent √™tre li√©s aux marques via hi√©rarchie :

**M√©thode 1 : Hi√©rarchie Parent**
1. Cr√©ez d'abord un terme parent avec le nom de la marque (ex: "Ferrari")
2. Puis cr√©ez les mod√®les enfants (ex: "458", "488", "F8")

**Exemple** :
```
Ferrari (parent)
  ‚îú‚îÄ 458 Italia
  ‚îú‚îÄ 488 GTB
  ‚îî‚îÄ F8 Tributo

Porsche (parent)
  ‚îú‚îÄ 911
  ‚îú‚îÄ Cayman
  ‚îî‚îÄ Taycan
```

**M√©thode 2 : Via Meta**
Si vous utilisez ACF, ajoutez un champ "Marque associ√©e" √† la taxonomie car_model.

---

## üìù Configuration Menu (IMPORTANT)

### Menu Principal

Le th√®me utilise maintenant le syst√®me de menus WordPress pour une flexibilit√© maximale.

1. **Apparence > Menus**
2. Cliquez sur **Cr√©er un nouveau menu**
3. Nom du menu : **Menu Principal**
4. Cliquez sur **Cr√©er le menu**

**Ajoutez vos pages** :

Dans la colonne de gauche, cochez les pages que vous voulez ajouter :

**Pages recommand√©es** :
- ‚òë Accueil (page d'accueil)
- ‚òë Page Galerie (ID cr√©√©e pr√©c√©demment)
- ‚òë Page Marques (ID 177)
- ‚òë Page Carte (ID cr√©√©e pr√©c√©demment)
- ‚òë Page Discussion (ID 11) - si bbPress activ√©

**Cliquez sur "Ajouter au menu"**

**Pour BuddyPress** (si activ√©) :

1. Dans la colonne de gauche, cliquez sur **Liens personnalis√©s**
2. Ajoutez ces liens :
   - URL : `/membres/` - Texte : **Membres**
   - URL : `/groupes/` - Texte : **Groupes** ou **Communaut√©**
   - URL : `/activite/` - Texte : **Activit√©**
3. Cliquez sur **Ajouter au menu** pour chacun

**Assignez le menu** :

En bas de la page, dans **R√©glages du menu** :
- ‚òë Cochez **Menu Principal** dans "Emplacement du th√®me"
- Cliquez sur **Enregistrer le menu**

### üéØ Avantages du Menu WordPress

**‚úÖ Le menu appara√Ætra automatiquement** :
- Dans le header desktop
- Dans le menu mobile hamburger (avec ic√¥nes automatiques !)
- Les ic√¥nes sont d√©tect√©es automatiquement selon le nom (Accueil, Explorer, Carte, etc.)

**‚úÖ Flexibilit√© totale** :
- R√©organisez l'ordre en drag & drop
- Ajoutez/supprimez des liens facilement
- Cr√©ez des sous-menus si besoin
- Pas besoin de modifier le code !

### Menu Footer (optionnel)

1. Cr√©ez un menu "Footer"
2. Ajoutez :
   - √Ä propos
   - Conditions d'utilisation
   - Politique de confidentialit√©
   - Contact
3. Assignez √† **Menu Footer**

### üé® Ic√¥nes Automatiques Menu Mobile

Le th√®me d√©tecte automatiquement le type de lien et ajoute l'ic√¥ne correspondante :

- **Accueil** ‚Üí üè† Ic√¥ne maison
- **Explorer / Galerie** ‚Üí üñºÔ∏è Ic√¥ne photos
- **Communaut√© / Groupes** ‚Üí üë• Ic√¥ne personnes
- **Carte** ‚Üí üìç Ic√¥ne map pin
- **Discussion / Forums** ‚Üí üí¨ Ic√¥ne chat
- **Profil** ‚Üí üë§ Ic√¥ne utilisateur

**Astuce** : Nommez vos √©l√©ments de menu avec ces mots-cl√©s pour obtenir les bonnes ic√¥nes !

---

## üéØ Configuration Permaliens

**IMPORTANT** : Pour que les URLs fonctionnent correctement :

1. Allez dans **R√©glages > Permaliens**
2. S√©lectionnez **Nom de l'article** ou **Structure personnalis√©e** : `/%postname%/`
3. Cliquez sur **Enregistrer**

Cela activera les URLs propres :
- `/photo/ferrari-458-italia/`
- `/marque/ferrari/`
- `/modele/458-italia/`

---

## üñºÔ∏è Premier Upload Test

1. Connectez-vous √† WordPress
2. Allez sur `/soumettre-photo/`
3. V√©rifiez que :
   - Le formulaire s'affiche
   - Les marques apparaissent dans le select
   - En choisissant une marque, les mod√®les se chargent
   - Le compteur "X photos restantes aujourd'hui" s'affiche
   - Le drag & drop fonctionne

4. Uploadez une photo avec EXIF GPS (prenez une photo avec votre t√©l√©phone avec g√©olocalisation activ√©e)

5. V√©rifiez apr√®s upload :
   - La photo appara√Æt sur la page d'accueil (section "Derni√®res Photos")
   - Elle appara√Æt dans la galerie `/galerie/`
   - Elle appara√Æt sur la carte `/carte/` (si GPS)
   - Une activit√© BuddyPress est cr√©√©e
   - Le watermark est appliqu√©

---

## üîç V√©rifications Post-Installation

### ‚úÖ Checklist

- [ ] Template "soumettre une photo" assign√© √† page ID 53
- [ ] Template "Page Marques" assign√© √† page ID 177
- [ ] Page Galerie cr√©√©e avec template Archive
- [ ] Page Carte cr√©√©e avec template Carte Interactive
- [ ] BuddyPress activ√© avec composants
- [ ] Groupes cr√©√©s pour marques (via `shiftzoner_init_brand_groups()`)
- [ ] Au moins 3 marques cr√©√©es avec logos
- [ ] Mod√®les cr√©√©s avec hi√©rarchie parent correcte
- [ ] Menu principal cr√©√© et assign√©
- [ ] Permaliens en "Nom de l'article"
- [ ] Easy Watermark ou notre watermark configur√©
- [ ] CAPTCHA 4WP configur√© (optionnel)
- [ ] Premier upload test r√©ussi

---

## üé® Personnalisation Customizer

1. Allez dans **Apparence > Personnaliser**
2. Section **Identit√© du site** :
   - Uploadez votre logo ShiftZoneR
3. Section **Page d'accueil ShiftZoneR** :
   - Personnalisez les textes hero, Rafael, communaut√©, CTA
4. Section **R√©seaux Sociaux** :
   - Ajoutez vos URLs Instagram, Facebook, Twitter

---

## üêõ D√©pannage

### Le formulaire d'upload ne s'affiche pas
- V√©rifiez que le template est bien assign√© √† la page
- V√©rifiez que vous √™tes connect√©
- V√©rifiez les erreurs PHP dans **Outils > Sant√© du site > Informations > Journaux**

### Les mod√®les ne se chargent pas quand je s√©lectionne une marque
- V√©rifiez que les mod√®les ont bien un parent correspondant √† la marque
- V√©rifiez dans la console navigateur (F12) s'il y a des erreurs AJAX
- L'URL AJAX devrait √™tre `/wp-admin/admin-ajax.php`

### Les photos n'apparaissent pas sur la carte
- V√©rifiez que les photos ont bien des donn√©es GPS EXIF
- V√©rifiez que Leaflet se charge (console navigateur F12)
- Testez avec une photo prise au t√©l√©phone avec GPS activ√©

### Le watermark ne s'applique pas
- Si Easy Watermark est activ√©, configurez-le dans **R√©glages > Easy Watermark**
- Si vous utilisez notre code, v√©rifiez que la fonction GD est activ√©e : `phpinfo()` > chercher "GD Support"

### Erreur 404 sur les pages
- Allez dans **R√©glages > Permaliens** et cliquez sur **Enregistrer** pour rafra√Æchir les r√®gles de r√©√©criture

---

## üìû Support

Pour toute question :
1. V√©rifiez ce guide d'installation
2. Consultez le README.md principal
3. V√©rifiez les logs dans **Outils > Sant√© du site**
4. Testez avec les th√®mes par d√©faut WordPress pour isoler le probl√®me

---

## üöÄ Pr√™t √† D√©marrer !

Une fois toutes ces √©tapes compl√©t√©es, votre plateforme ShiftZoneR est op√©rationnelle !

Bon lancement ! üèéÔ∏èüì∏
